SQL DATA:

First Start a New Match;

Code for matches:


$MatchNumber = $param2->MatchNumber;
$Blue = $this->connection->getTeamInfo(1); // Needed for TeamName eventually
$Red = $this->connection->getTeamInfo(2); // Needed for TeamName Eventually
$MatchName = ''.$Red.' vs '.$Blue.'';
$isFinished = 1 - 0;

INSERT INTO  `manialive`.`matches` (
`id` ,
`name` ,
`team1` ,
`team2` ,
`startTime` ,
`isFinished`
)
VALUES (
'1',  'Match1',  'Teamname1',  'TeamName2', 
CURRENT_TIMESTAMP ,  '0'
);

Then you can Setup data for the Rest:

code for teams:

$Red = $this->connection->getTeamInfo(1);
$Blue = $this->connection->getTeamInfo(2);
$matchNumber = $this->matchnr;
$MapNum = $this->mapNr;
$map = $this->connection->getCurrentMapInfo();
$MapName = $map->Name;
$attack =  $data->AttackingClan;
$defense =  $data->DefendingClan;
$Capture =  $data->WinType; //Capturing the pole +1 for team. (Will need to see how this works with tests.)
$timeOver = $data->WinType;
$atkWinEliminate = $data->WinType;
$defWinEliminate = $data->Wintype;
$isFinished = OndEndTurn if called do +1 else 0 or -1.

INSERT INTO  `manialive`.`teams` (
`team` ,
`matchId` ,
`mapNum` ,
`mapName` ,
`attack` ,
`defence` ,
`capture` ,
`timeOver` ,
`attackWinEliminate` ,
`defenceWinEliminate` ,
`isFinished`
)
VALUES (
'TeamName1',  '1',  '1',  'Elite - StarChaser',  '1',  '1',  '1',  '1',  '1',  '0',  '0'
);


code for shots:

$weaponNum = $data->WeaponNum;
$ShootCurrentClan = $data->Event->Shooter->Login;
$RoundId = $data->TurnNumber;
$MapNum = $data->MapNumber;
$map = $this->connection->getCurrentMapInfo();
$MapName = $map->Name;
$MatchId = $data->MatchNumber;
$shots = +1;
$hits is called on OnHit +1;
$eliminations is called on OnPlayerArmorEmpty +1;

INSERT INTO  `manialive`.`shots` (
`player` ,
`team` ,
`weaponId` ,
`roundId` ,
`mapNum` ,
`mapName` ,
`matchId` ,
`shots` ,
`hits` ,
`eliminations`
)
VALUES (
'w1lla',  'TeamName',  '1',  '1',  '1',  'Elite - StarChaser',  '1',  '1',  '1',  '1'
);

code for Captures:

OnPoleCapture;

$PlayerCapturingLogin = $data->Event->Player->Login; //Login of Player Capturing
$PlayerCapturingNickName = $data->Event->Player->Name; // Nickname of Player Capturing
$PlayerCapturingCurrentClan = $data->Event->Player->CurrentClan; // CurrentClan of PlayerCapturing 1 = Blue, 2 = Red
$PlayerCapturingCaptured = $data->Event->Player->IsCapturing; // True/False. Will report True on Capturing
$RoundId = $data->RoundId;
$MapNum = $data->MapNum;
$MatchId = $data->MatchId;
$map = $this->connection->getCurrentMapInfo();
$MapName = $map->Name;
INSERT INTO  `manialive`.`captures` (
`player` ,
`team` ,
`roundId` ,
`mapNum` ,
`mapName` ,
`matchId`
)
VALUES (
'w1lla',  'TeamName',  '1',  '1',  'Elite - StarChaser',  '1'
);

code for Eliminations:

OnPlayerArmorEmpty:

$map = $this->connection->getCurrentMapInfo();
$MapName = $map->Name;
$MapNum = $data->MapNum;
$ArmorEmptyWeaponNum = $data->Event->WeaponNum; // WeaponNum see sidenotes;
$ArmorEmptyShooterLogin = $data->Event->Shooter->Login; // Shooter Login
$ArmorEmptyShooterNickName = $data->Event->Shooter->Name; // Shooter NickName
$ArmorEmptyShooterCurrentClan = $data->Event->Shooter->CurrentClan; // Shooter CurrentClan see sidenotes;
$RoundId = $data->RoundId;
$MatchId = $data->MatchId;
$eliminations = on Callback +1;
INSERT INTO  `manialive`.`eliminations` (
`player` ,
`team` ,
`roundId` ,
`mapNum` ,
`mapName` ,
`matchId` ,
`eliminations`
)
VALUES (
'w1lla',  'TeamName',  '1',  '1',  'Elite - StarChaser',  '1',  '1'
);

code for onNearMiss:

$NearMissCM = $data->Event->MissDist; //$Distance * 100; // mm / cm // M
$NearMissShooterLogin = $data->Event->Shooter->Login; // Shooter Login
$NearMissShooterNickName = $data->Event->Shooter->Name; // Shooter Name
$NearMissShooterCurrentClan = $data->Event->Shooter->CurrentClan; // Shooter CurrentClan
$NearMissVictimLogin = $data->Event->Victim->Login; // Victim Login
$NearMissVictimNickName = $data->Event->Victim->Name; // Shooter NickName
$NearMissVictimCurrentClan = $data->Event->Victim->CurrentClan; // Shooter CurrentClan
$map = $this->connection->getCurrentMapInfo();
$MapName = $map->Name;
$MapNum = $data->MapNum;
$Weaponnum = $data->Event->WeaponNum;

INSERT INTO  `manialive`.`nearmiss` (
`id` ,
`player` ,
`MissDist` ,
`weaponId` ,
`matchId` ,
`mapNum` ,
`mapName`
)
VALUES (
'1',  'w1lla',  '0.0256433',  '1',  '1',  '1',  'Elite - StarChaser'
);
